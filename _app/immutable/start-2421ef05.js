var xe=Object.defineProperty;var et=(r,e,t)=>e in r?xe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var me=(r,e,t)=>(et(r,typeof e!="symbol"?e+"":e,t),t);import{_ as X}from"./chunks/preload-helper-aa6bc0ce.js";import{n as ge,s as Ye,S as tt,i as nt,a as rt,e as T,c as at,b as z,g as Y,t as N,d as Q,f as D,h as C,j as st,o as ve,k as ot,l as it,m as lt,p as we,q as G,r as ct,u as ft,v as ut,w as B,x as ne,y as J,z as K,A as ze}from"./chunks/index-23535c31.js";class ie{constructor(e,t){me(this,"name","HttpError");me(this,"stack");this.status=e,this.message=t!=null?t:`Error: ${e}`}toString(){return this.message}}class Be{constructor(e,t){this.status=e,this.location=t}}function dt(r,e){return r==="/"||e==="ignore"?r:e==="never"?r.endsWith("/")?r.slice(0,-1):r:e==="always"&&!r.endsWith("/")?r+"/":r}function pt(r){for(const e in r)r[e]=r[e].replace(/%23/g,"#").replace(/%3[Bb]/g,";").replace(/%2[Cc]/g,",").replace(/%2[Ff]/g,"/").replace(/%3[Ff]/g,"?").replace(/%3[Aa]/g,":").replace(/%40/g,"@").replace(/%26/g,"&").replace(/%3[Dd]/g,"=").replace(/%2[Bb]/g,"+").replace(/%24/g,"$");return r}const ht=["href","pathname","search","searchParams","toString","toJSON"];function _t(r,e){const t=new URL(r);for(const s of ht){let a=t[s];Object.defineProperty(t,s,{get(){return e(),a},enumerable:!0,configurable:!0})}return t[Symbol.for("nodejs.util.inspect.custom")]=(s,a,u)=>u(r,a),mt(t),t}function mt(r){Object.defineProperty(r,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const x=[];function Re(r,e=ge){let t;const s=new Set;function a(o){if(Ye(r,o)&&(r=o,t)){const f=!x.length;for(const d of s)d[1](),x.push(d,r);if(f){for(let d=0;d<x.length;d+=2)x[d][0](x[d+1]);x.length=0}}}function u(o){a(o(r))}function n(o,f=ge){const d=[o,f];return s.add(d),s.size===1&&(t=e(a)||ge),o(r),()=>{s.delete(d),s.size===0&&(t(),t=null)}}return{set:a,update:u,subscribe:n}}let Je="",Qe="";function gt(r){Je=r.base,Qe=r.assets||Je}function Ke(r){let e=r.baseURI;if(!e){const t=r.getElementsByTagName("base");e=t.length?t[0].href:r.URL}return e}function ke(){return{x:pageXOffset,y:pageYOffset}}function Fe(r){let e,t=null,s=null,a=null;for(const n of r.composedPath())n instanceof Element&&(!e&&n.nodeName.toUpperCase()==="A"&&(e=n),t===null&&(t=be(n,"data-sveltekit-noscroll")),s===null&&(s=be(n,"data-sveltekit-prefetch")),a===null&&(a=be(n,"data-sveltekit-reload")));const u=e&&new URL(e instanceof SVGAElement?e.href.baseVal:e.href,document.baseURI);return{a:e,url:u,options:{noscroll:t,prefetch:s,reload:a}}}function be(r,e){const t=r.getAttribute(e);return t===null?t:t===""?!0:(t==="off",!1)}function Ge(r){const e=Re(r);let t=!0;function s(){t=!0,e.update(n=>n)}function a(n){t=!1,e.set(n)}function u(n){let o;return e.subscribe(f=>{(o===void 0||t&&f!==o)&&n(o=f)})}return{notify:s,set:a,subscribe:u}}function wt(){const{set:r,subscribe:e}=Re(!1);let t;async function s(){clearTimeout(t);const a=await fetch(`${Qe}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(a.ok){const{version:u}=await a.json(),n=u!=="1662376650371";return n&&(r(!0),clearTimeout(t)),n}else throw new Error(`Version check failed: ${a.status}`)}return{subscribe:e,check:s}}function bt(r){let e=5381,t=r.length;if(typeof r=="string")for(;t;)e=e*33^r.charCodeAt(--t);else for(;t;)e=e*33^r[--t];return(e>>>0).toString(36)}const Se=window.fetch;window.fetch=(r,e)=>{if((r instanceof Request?r.method:(e==null?void 0:e.method)||"GET")!=="GET"){const s=new URL(r instanceof Request?r.url:r.toString(),document.baseURI).href;le.delete(s)}return Se(r,e)};const le=new Map;function yt(r,e,t){let a=`script[data-sveltekit-fetched][data-url=${JSON.stringify(typeof r=="string"?r:r.url)}]`;t&&typeof t.body=="string"&&(a+=`[data-hash="${bt(t.body)}"]`);const u=document.querySelector(a);if(u!=null&&u.textContent){const{body:n,...o}=JSON.parse(u.textContent),f=u.getAttribute("data-ttl");return f&&le.set(e,{body:n,init:o,ttl:1e3*Number(f)}),Promise.resolve(new Response(n,o))}return Se(r,t)}function vt(r,e){const t=le.get(r);if(t){if(performance.now()<t.ttl)return new Response(t.body,t.init);le.delete(r)}return Se(r,e)}const kt=/^(\.\.\.)?(\w+)(?:=(\w+))?$/;function $t(r){const e=[],t=[];let s=!0;if(/\]\[/.test(r))throw new Error(`Invalid route ${r} \u2014 parameters must be separated`);if(He("[",r)!==He("]",r))throw new Error(`Invalid route ${r} \u2014 brackets are unbalanced`);return{pattern:r===""?/^\/$/:new RegExp(`^${r.split(/(?:\/|$)/).filter(Et).map((u,n,o)=>{const f=decodeURIComponent(u),d=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(f);if(d)return e.push(d[1]),t.push(d[2]),"(?:/(.*))?";const g=n===o.length-1;return f&&"/"+f.split(/\[(.+?)\]/).map((S,j)=>{if(j%2){const L=kt.exec(S);if(!L)throw new Error(`Invalid param: ${S}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,I,F,H]=L;return e.push(F),t.push(H),I?"(.*?)":"([^/]+?)"}return g&&S.includes(".")&&(s=!1),S.normalize().replace(/%5[Bb]/g,"[").replace(/%5[Dd]/g,"]").replace(/#/g,"%23").replace(/\?/g,"%3F").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("")}).join("")}${s?"/?":""}$`),names:e,types:t}}function Et(r){return!/^\([^)]+\)$/.test(r)}function Rt(r,e,t,s){const a={};for(let u=0;u<e.length;u+=1){const n=e[u],o=t[u],f=r[u+1]||"";if(o){const d=s[o];if(!d)throw new Error(`Missing "${o}" param matcher`);if(!d(f))return}a[n]=f}return a}function He(r,e){let t=0;for(let s=0;s<e.length;s+=1)e[s]===r&&(t+=1);return t}function St(r,e,t,s){const a=new Set(e);return Object.entries(t).map(([o,[f,d,g]])=>{const{pattern:S,names:j,types:L}=$t(o),I={id:o,exec:F=>{const H=S.exec(F);if(H)return Rt(H,j,L,s)},errors:[1,...g||[]].map(F=>r[F]),layouts:[0,...d||[]].map(n),leaf:u(f)};return I.errors.length=I.layouts.length=Math.max(I.errors.length,I.layouts.length),I});function u(o){const f=o<0;return f&&(o=~o),[f,r[o]]}function n(o){return o===void 0?o:[a.has(o),r[o]]}}function Lt(r,e){return new ie(r,e)}function Ot(r){let e,t,s;var a=r[0][0];function u(n){return{props:{data:n[1],errors:n[4]}}}return a&&(e=new a(u(r))),{c(){e&&B(e.$$.fragment),t=T()},l(n){e&&ne(e.$$.fragment,n),t=T()},m(n,o){e&&J(e,n,o),z(n,t,o),s=!0},p(n,o){const f={};if(o&2&&(f.data=n[1]),o&16&&(f.errors=n[4]),a!==(a=n[0][0])){if(e){Y();const d=e;N(d.$$.fragment,1,0,()=>{K(d,1)}),Q()}a?(e=new a(u(n)),B(e.$$.fragment),D(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(n){s||(e&&D(e.$$.fragment,n),s=!0)},o(n){e&&N(e.$$.fragment,n),s=!1},d(n){n&&C(t),e&&K(e,n)}}}function Pt(r){let e,t,s;var a=r[0][0];function u(n){return{props:{data:n[1],errors:n[4],$$slots:{default:[jt]},$$scope:{ctx:n}}}}return a&&(e=new a(u(r))),{c(){e&&B(e.$$.fragment),t=T()},l(n){e&&ne(e.$$.fragment,n),t=T()},m(n,o){e&&J(e,n,o),z(n,t,o),s=!0},p(n,o){const f={};if(o&2&&(f.data=n[1]),o&16&&(f.errors=n[4]),o&1053&&(f.$$scope={dirty:o,ctx:n}),a!==(a=n[0][0])){if(e){Y();const d=e;N(d.$$.fragment,1,0,()=>{K(d,1)}),Q()}a?(e=new a(u(n)),B(e.$$.fragment),D(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(n){s||(e&&D(e.$$.fragment,n),s=!0)},o(n){e&&N(e.$$.fragment,n),s=!1},d(n){n&&C(t),e&&K(e,n)}}}function It(r){let e,t,s;var a=r[0][1];function u(n){return{props:{data:n[2],errors:n[4]}}}return a&&(e=new a(u(r))),{c(){e&&B(e.$$.fragment),t=T()},l(n){e&&ne(e.$$.fragment,n),t=T()},m(n,o){e&&J(e,n,o),z(n,t,o),s=!0},p(n,o){const f={};if(o&4&&(f.data=n[2]),o&16&&(f.errors=n[4]),a!==(a=n[0][1])){if(e){Y();const d=e;N(d.$$.fragment,1,0,()=>{K(d,1)}),Q()}a?(e=new a(u(n)),B(e.$$.fragment),D(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(n){s||(e&&D(e.$$.fragment,n),s=!0)},o(n){e&&N(e.$$.fragment,n),s=!1},d(n){n&&C(t),e&&K(e,n)}}}function At(r){let e,t,s;var a=r[0][1];function u(n){return{props:{data:n[2],errors:n[4],$$slots:{default:[Ut]},$$scope:{ctx:n}}}}return a&&(e=new a(u(r))),{c(){e&&B(e.$$.fragment),t=T()},l(n){e&&ne(e.$$.fragment,n),t=T()},m(n,o){e&&J(e,n,o),z(n,t,o),s=!0},p(n,o){const f={};if(o&4&&(f.data=n[2]),o&16&&(f.errors=n[4]),o&1049&&(f.$$scope={dirty:o,ctx:n}),a!==(a=n[0][1])){if(e){Y();const d=e;N(d.$$.fragment,1,0,()=>{K(d,1)}),Q()}a?(e=new a(u(n)),B(e.$$.fragment),D(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(n){s||(e&&D(e.$$.fragment,n),s=!0)},o(n){e&&N(e.$$.fragment,n),s=!1},d(n){n&&C(t),e&&K(e,n)}}}function Ut(r){let e,t,s;var a=r[0][2];function u(n){return{props:{data:n[3],errors:n[4]}}}return a&&(e=new a(u(r))),{c(){e&&B(e.$$.fragment),t=T()},l(n){e&&ne(e.$$.fragment,n),t=T()},m(n,o){e&&J(e,n,o),z(n,t,o),s=!0},p(n,o){const f={};if(o&8&&(f.data=n[3]),o&16&&(f.errors=n[4]),a!==(a=n[0][2])){if(e){Y();const d=e;N(d.$$.fragment,1,0,()=>{K(d,1)}),Q()}a?(e=new a(u(n)),B(e.$$.fragment),D(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(n){s||(e&&D(e.$$.fragment,n),s=!0)},o(n){e&&N(e.$$.fragment,n),s=!1},d(n){n&&C(t),e&&K(e,n)}}}function jt(r){let e,t,s,a;const u=[At,It],n=[];function o(f,d){return f[0][2]?0:1}return e=o(r),t=n[e]=u[e](r),{c(){t.c(),s=T()},l(f){t.l(f),s=T()},m(f,d){n[e].m(f,d),z(f,s,d),a=!0},p(f,d){let g=e;e=o(f),e===g?n[e].p(f,d):(Y(),N(n[g],1,1,()=>{n[g]=null}),Q(),t=n[e],t?t.p(f,d):(t=n[e]=u[e](f),t.c()),D(t,1),t.m(s.parentNode,s))},i(f){a||(D(t),a=!0)},o(f){N(t),a=!1},d(f){n[e].d(f),f&&C(s)}}}function Me(r){let e,t=r[6]&&We(r);return{c(){e=ot("div"),t&&t.c(),this.h()},l(s){e=it(s,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var a=lt(e);t&&t.l(a),a.forEach(C),this.h()},h(){we(e,"id","svelte-announcer"),we(e,"aria-live","assertive"),we(e,"aria-atomic","true"),G(e,"position","absolute"),G(e,"left","0"),G(e,"top","0"),G(e,"clip","rect(0 0 0 0)"),G(e,"clip-path","inset(50%)"),G(e,"overflow","hidden"),G(e,"white-space","nowrap"),G(e,"width","1px"),G(e,"height","1px")},m(s,a){z(s,e,a),t&&t.m(e,null)},p(s,a){s[6]?t?t.p(s,a):(t=We(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&C(e),t&&t.d()}}}function We(r){let e;return{c(){e=ct(r[7])},l(t){e=ft(t,r[7])},m(t,s){z(t,e,s)},p(t,s){s&128&&ut(e,t[7])},d(t){t&&C(e)}}}function Tt(r){let e,t,s,a,u;const n=[Pt,Ot],o=[];function f(g,S){return g[0][1]?0:1}e=f(r),t=o[e]=n[e](r);let d=r[5]&&Me(r);return{c(){t.c(),s=rt(),d&&d.c(),a=T()},l(g){t.l(g),s=at(g),d&&d.l(g),a=T()},m(g,S){o[e].m(g,S),z(g,s,S),d&&d.m(g,S),z(g,a,S),u=!0},p(g,[S]){let j=e;e=f(g),e===j?o[e].p(g,S):(Y(),N(o[j],1,1,()=>{o[j]=null}),Q(),t=o[e],t?t.p(g,S):(t=o[e]=n[e](g),t.c()),D(t,1),t.m(s.parentNode,s)),g[5]?d?d.p(g,S):(d=Me(g),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},i(g){u||(D(t),u=!0)},o(g){N(t),u=!1},d(g){o[e].d(g),g&&C(s),d&&d.d(g),g&&C(a)}}}function Nt(r,e,t){let{stores:s}=e,{page:a}=e,{components:u}=e,{data_0:n=null}=e,{data_1:o=null}=e,{data_2:f=null}=e,{errors:d}=e;st(s.page.notify);let g=!1,S=!1,j=null;return ve(()=>{const L=s.page.subscribe(()=>{g&&(t(6,S=!0),t(7,j=document.title||"untitled page"))});return t(5,g=!0),L}),r.$$set=L=>{"stores"in L&&t(8,s=L.stores),"page"in L&&t(9,a=L.page),"components"in L&&t(0,u=L.components),"data_0"in L&&t(1,n=L.data_0),"data_1"in L&&t(2,o=L.data_1),"data_2"in L&&t(3,f=L.data_2),"errors"in L&&t(4,d=L.errors)},r.$$.update=()=>{r.$$.dirty&768&&s.page.set(a)},[u,n,o,f,d,g,S,j,s,a]}class Dt extends tt{constructor(e){super(),nt(this,e,Nt,Tt,Ye,{stores:8,page:9,components:0,data_0:1,data_1:2,data_2:3,errors:4})}}const Vt={},ce=[()=>X(()=>import("./chunks/0-a29a4a22.js"),["chunks/0-a29a4a22.js","chunks/_layout-8d2a742b.js","components/pages/_layout.svelte-99e8d8b7.js","assets/_layout-be0e98a9.css","chunks/index-23535c31.js"],import.meta.url),()=>X(()=>import("./chunks/1-a6254823.js"),["chunks/1-a6254823.js","components/pages/_error.svelte-1f2eccad.js","assets/_error-125d203c.css","chunks/index-23535c31.js"],import.meta.url),()=>X(()=>import("./chunks/2-bb2c4f12.js"),["chunks/2-bb2c4f12.js","chunks/_layout-e87908c1.js","components/pages/_slug_/_layout.svelte-5487ac65.js","assets/_layout-d8cf1152.css","chunks/index-23535c31.js"],import.meta.url),()=>X(()=>import("./chunks/3-e13b070b.js"),["chunks/3-e13b070b.js","chunks/_page-c60853fe.js","components/pages/_page.svelte-cc79ff8c.js","assets/_page-5aebba9a.css","chunks/index-23535c31.js","chunks/katex-63d67c62.js"],import.meta.url),()=>X(()=>import("./chunks/4-3fb0d260.js"),["chunks/4-3fb0d260.js","chunks/_page-2be92c82.js","chunks/preload-helper-aa6bc0ce.js","components/pages/_slug_/_page.svelte-76528631.js","assets/_page-1ff05377.css","chunks/index-23535c31.js","chunks/katex-63d67c62.js"],import.meta.url),()=>X(()=>import("./chunks/5-d90ece65.js"),["chunks/5-d90ece65.js","chunks/_page-d84940a5.js","components/pages/books/R1/_page.svelte-b70b5b72.js","assets/_page-339ec7e5.css","chunks/index-23535c31.js"],import.meta.url)],qt=[],Ct={"":[3],"books/R1":[5],"[slug]":[4,[2]]};function zt(r){r.client}const W={url:Ge({}),page:Ge({}),navigating:Re(null),updated:wt()},Bt="/__data.js",Ze="sveltekit:scroll",M="sveltekit:index",se=St(ce,qt,Ct,Vt),$e=ce[0],Ee=ce[1];$e();Ee();let te={};try{te=JSON.parse(sessionStorage[Ze])}catch{}function ye(r){te[r]=ke()}function Jt({target:r,base:e,trailing_slash:t}){var De;const s=[],a={id:null,promise:null},u={before_navigate:[],after_navigate:[]};let n={branch:[],error:null,session_id:0,url:null},o=!1,f=!0,d=!1,g=1,S=null,j=!1,L,I=(De=history.state)==null?void 0:De[M];I||(I=Date.now(),history.replaceState({...history.state,[M]:I},"",location.href));const F=te[I];F&&(history.scrollRestoration="manual",scrollTo(F.x,F.y));let H=!1,Z,Le;function Oe(){if(!S){const i=new URL(location.href);S=Promise.resolve().then(async()=>{const c=de(i);await Ae(c,i,[]),S=null,j=!1})}return S}async function Pe(i,{noscroll:c=!1,replaceState:h=!1,keepfocus:l=!1,state:p={}},b){return typeof i=="string"&&(i=new URL(i,Ke(document))),pe({url:i,scroll:c?ke():null,keepfocus:l,redirect_chain:b,details:{state:p,replaceState:h},accepted:()=>{},blocked:()=>{},type:"goto"})}async function Ie(i){const c=de(i);if(!c)throw new Error("Attempted to prefetch a URL that does not belong to this app");return a.promise=Te(c),a.id=c.id,a.promise}async function Ae(i,c,h,l,p){var E,k;const b=Le={};let w=i&&await Te(i);if(!w&&c.origin===location.origin&&c.pathname===location.pathname&&(w=await ae({status:404,error:new Error(`Not found: ${c.pathname}`),url:c,routeId:null})),!w)return await ee(c),!1;if(c=(i==null?void 0:i.url)||c,Le!==b)return!1;if(s.length=0,w.type==="redirect")if(h.length>10||h.includes(c.pathname))w=await ae({status:500,error:new Error("Redirect loop"),url:c,routeId:null});else return Pe(new URL(w.location,c).href,{},[...h,c.pathname]),!1;else((k=(E=w.props)==null?void 0:E.page)==null?void 0:k.status)>=400&&await W.updated.check()&&await ee(c);if(d=!0,l&&l.details){const{details:v}=l,y=v.replaceState?0:1;v.state[M]=I+=y,history[v.replaceState?"replaceState":"pushState"](v.state,"",c)}if(o?(n=w.state,w.props.page&&(w.props.page.url=c),L.$set(w.props)):Ue(w),l){const{scroll:v,keepfocus:y}=l;if(!y){const $=document.body,U=$.getAttribute("tabindex");$.tabIndex=-1,$.focus({preventScroll:!0}),setTimeout(()=>{var R;(R=getSelection())==null||R.removeAllRanges()}),U!==null?$.setAttribute("tabindex",U):$.removeAttribute("tabindex")}if(await ze(),f){const $=c.hash&&document.getElementById(c.hash.slice(1));v?scrollTo(v.x,v.y):$?$.scrollIntoView():scrollTo(0,0)}}else await ze();a.promise=null,a.id=null,f=!0,w.props.page&&(Z=w.props.page),p&&p(),d=!1}function Ue(i){var l,p;n=i.state;const c=document.querySelector("style[data-sveltekit]");c&&c.remove(),Z=i.props.page,L=new Dt({target:r,props:{...i.props,stores:W},hydrate:!0});const h={from:null,to:oe("to",{params:n.params,routeId:(p=(l=n.route)==null?void 0:l.id)!=null?p:null,url:new URL(location.href)}),type:"load"};u.after_navigate.forEach(b=>b(h)),o=!0}async function re({url:i,params:c,branch:h,status:l,error:p,route:b,validation_errors:w}){var U;const E=h.filter(Boolean),k={type:"loaded",state:{url:i,params:c,branch:h,error:p,route:b,session_id:g},props:{components:E.map(R=>R.node.component),errors:w}};let v={},y=!Z;for(let R=0;R<E.length;R+=1){const P=E[R];v={...v,...P.data},(y||!n.branch.some(_=>_===P))&&(k.props[`data_${R}`]=v,y=y||Object.keys((U=P.data)!=null?U:{}).length>0)}if(y||(y=Object.keys(Z.data).length!==Object.keys(v).length),!n.url||i.href!==n.url.href||n.error!==p||y){k.props.page={error:p,params:c,routeId:b&&b.id,status:l,url:i,data:y?v:Z.data};const R=(P,_)=>{Object.defineProperty(k.props.page,P,{get:()=>{throw new Error(`$page.${P} has been replaced by $page.url.${_}`)}})};R("origin","origin"),R("path","pathname"),R("query","searchParams")}return k}async function fe({loader:i,parent:c,url:h,params:l,routeId:p,server_data_node:b}){var v,y,$,U,R;let w=null;const E={dependencies:new Set,params:new Set,parent:!1,url:!1},k=await i();if((v=k.shared)!=null&&v.load){let P=function(...m){for(const O of m){const{href:V}=new URL(O,h);E.dependencies.add(V)}};const _={};for(const m in l)Object.defineProperty(_,m,{get(){return E.params.add(m),l[m]},enumerable:!0});const A={routeId:p,params:_,data:(y=b==null?void 0:b.data)!=null?y:null,url:_t(h,()=>{E.url=!0}),async fetch(m,O){let V;typeof m=="string"?V=m:(V=m.url,O={body:m.method==="GET"||m.method==="HEAD"?void 0:await m.blob(),cache:m.cache,credentials:m.credentials,headers:m.headers,integrity:m.integrity,keepalive:m.keepalive,method:m.method,mode:m.mode,redirect:m.redirect,referrer:m.referrer,referrerPolicy:m.referrerPolicy,signal:m.signal,...O});const q=new URL(V,h).href;return P(q),o?vt(q,O):yt(V,q,O)},setHeaders:()=>{},depends:P,parent(){return E.parent=!0,c()}};Object.defineProperties(A,{props:{get(){throw new Error("@migration task: Replace `props` with `data` stuff https://github.com/sveltejs/kit/discussions/5774#discussioncomment-3292693")},enumerable:!1},session:{get(){throw new Error("session is no longer available. See https://github.com/sveltejs/kit/discussions/5883")},enumerable:!1},stuff:{get(){throw new Error("@migration task: Remove stuff https://github.com/sveltejs/kit/discussions/5774#discussioncomment-3292693")},enumerable:!1}}),w=($=await k.shared.load.call(null,A))!=null?$:null}return{node:k,loader:i,server:b,shared:(U=k.shared)!=null&&U.load?{type:"data",data:w,uses:E}:null,data:(R=w!=null?w:b==null?void 0:b.data)!=null?R:null}}function je(i,c,h){if(j)return!0;if(!h)return!1;if(h.parent&&c||i.url&&h.url)return!0;for(const l of i.params)if(h.params.has(l))return!0;for(const l of h.dependencies)if(s.some(p=>p(new URL(l))))return!0;return!1}function ue(i,c){var h,l;return(i==null?void 0:i.type)==="data"?{type:"data",data:i.data,uses:{dependencies:new Set((h=i.uses.dependencies)!=null?h:[]),params:new Set((l=i.uses.params)!=null?l:[]),parent:!!i.uses.parent,url:!!i.uses.url}}:(i==null?void 0:i.type)==="skip"&&c!=null?c:null}async function Te({id:i,url:c,params:h,route:l}){if(a.id===i&&a.promise)return a.promise;const{errors:p,layouts:b,leaf:w}=l,E=n.url&&{url:i!==n.url.pathname+n.url.search,params:Object.keys(h).filter(_=>n.params[_]!==h[_])},k=[...b,w];p.forEach(_=>_==null?void 0:_().catch(()=>{})),k.forEach(_=>_==null?void 0:_[1]().catch(()=>{}));let v=null;const y=k.reduce((_,A,m)=>{var q;const O=n.branch[m],V=!!(A!=null&&A[0])&&((O==null?void 0:O.loader)!==A[1]||je(E,_.some(Boolean),(q=O.server)==null?void 0:q.uses));return _.push(V),_},[]);if(y.some(Boolean)){try{v=await Xe(c,y)}catch(_){return ae({status:500,error:_,url:c,routeId:l.id})}if(v.type==="redirect")return v}const $=v==null?void 0:v.nodes;let U=!1;const R=k.map(async(_,A)=>{var he,Ve;if(!_)return;const m=n.branch[A],O=(he=$==null?void 0:$[A])!=null?he:null;if((!O||O.type==="skip")&&_[1]===(m==null?void 0:m.loader)&&!je(E,U,(Ve=m.shared)==null?void 0:Ve.uses))return m;if(U=!0,(O==null?void 0:O.type)==="error")throw O.httperror?Lt(O.httperror.status,O.httperror.message):O.error;return fe({loader:_[1],url:c,params:h,routeId:l.id,parent:async()=>{var Ce;const qe={};for(let _e=0;_e<A;_e+=1)Object.assign(qe,(Ce=await R[_e])==null?void 0:Ce.data);return qe},server_data_node:ue(O,m==null?void 0:m.server)})});for(const _ of R)_.catch(()=>{});const P=[];for(let _=0;_<k.length;_+=1)if(k[_])try{P.push(await R[_])}catch(A){const m=A;if(m instanceof Be)return{type:"redirect",location:m.location};const O=A instanceof ie?A.status:500;for(;_--;)if(p[_]){let V,q=_;for(;!P[q];)q-=1;try{return V={node:await p[_](),loader:p[_],data:{},server:null,shared:null},await re({url:c,params:h,branch:P.slice(0,q+1).concat(V),status:O,error:m,route:l})}catch{continue}}await ee(c);return}else P.push(void 0);return await re({url:c,params:h,branch:P,status:200,error:null,route:l})}async function ae({status:i,error:c,url:h,routeId:l}){var v;const p={},b=await $e();let w=null;if(b.server)try{const y=await Xe(h,[!0]);if(y.type!=="data"||y.nodes[0]&&y.nodes[0].type!=="data")throw 0;w=(v=y.nodes[0])!=null?v:null}catch{await ee(h);return}const E=await fe({loader:$e,url:h,params:p,routeId:l,parent:()=>Promise.resolve({}),server_data_node:ue(w)}),k={node:await Ee(),loader:Ee,shared:null,server:null,data:null};return await re({url:h,params:p,branch:[E,k],status:i,error:c,route:null})}function de(i){if(Ne(i))return;const c=decodeURI(i.pathname.slice(e.length)||"/");for(const h of se){const l=h.exec(c);if(l){const p=new URL(i.origin+dt(i.pathname,t)+i.search+i.hash);return{id:p.pathname+p.search,route:h,params:pt(l),url:p}}}}function Ne(i){return i.origin!==location.origin||!i.pathname.startsWith(e)}async function pe({url:i,scroll:c,keepfocus:h,redirect_chain:l,details:p,type:b,delta:w,accepted:E,blocked:k}){var R,P,_,A;let v=!1;const y=de(i),$={from:oe("from",{params:n.params,routeId:(P=(R=n.route)==null?void 0:R.id)!=null?P:null,url:n.url}),to:oe("to",{params:(_=y==null?void 0:y.params)!=null?_:null,routeId:(A=y==null?void 0:y.route.id)!=null?A:null,url:i}),type:b};w!==void 0&&($.delta=w);const U={...$,cancel:()=>{v=!0}};if(u.before_navigate.forEach(m=>m(U)),v){k();return}ye(I),E(),o&&W.navigating.set($),await Ae(y,i,l,{scroll:c,keepfocus:h,details:p},()=>{u.after_navigate.forEach(m=>m($)),W.navigating.set(null)})}function ee(i){return location.href=i.href,new Promise(()=>{})}return{after_navigate:i=>{ve(()=>(u.after_navigate.push(i),()=>{const c=u.after_navigate.indexOf(i);u.after_navigate.splice(c,1)}))},before_navigate:i=>{ve(()=>(u.before_navigate.push(i),()=>{const c=u.before_navigate.indexOf(i);u.before_navigate.splice(c,1)}))},disable_scroll_handling:()=>{(d||!o)&&(f=!1)},goto:(i,c={})=>Pe(i,c,[]),invalidate:i=>{if(i===void 0)throw new Error("`invalidate()` (with no arguments) has been replaced by `invalidateAll()`");if(typeof i=="function")s.push(i);else{const{href:c}=new URL(i,location.href);s.push(h=>h.href===c)}return Oe()},invalidateAll:()=>(j=!0,Oe()),prefetch:async i=>{const c=new URL(i,Ke(document));await Ie(c)},prefetch_routes:async i=>{const h=(i?se.filter(l=>i.some(p=>l.exec(p))):se).map(l=>Promise.all([...l.layouts,l.leaf].map(p=>p==null?void 0:p[1]())));await Promise.all(h)},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",l=>{var w,E;let p=!1;const b={from:oe("from",{params:n.params,routeId:(E=(w=n.route)==null?void 0:w.id)!=null?E:null,url:n.url}),to:null,type:"unload",cancel:()=>p=!0};u.before_navigate.forEach(k=>k(b)),p?(l.preventDefault(),l.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){ye(I);try{sessionStorage[Ze]=JSON.stringify(te)}catch{}}});const i=l=>{const{url:p,options:b}=Fe(l);if(p&&b.prefetch){if(Ne(p))return;Ie(p)}};let c;const h=l=>{clearTimeout(c),c=setTimeout(()=>{var p;(p=l.target)==null||p.dispatchEvent(new CustomEvent("sveltekit:trigger_prefetch",{bubbles:!0}))},20)};addEventListener("touchstart",i),addEventListener("mousemove",h),addEventListener("sveltekit:trigger_prefetch",i),addEventListener("click",l=>{if(l.button||l.which!==1||l.metaKey||l.ctrlKey||l.shiftKey||l.altKey||l.defaultPrevented)return;const{a:p,url:b,options:w}=Fe(l);if(!p||!b)return;const E=p instanceof SVGAElement;if(!E&&!(b.protocol==="https:"||b.protocol==="http:"))return;const k=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||k.includes("external")||w.reload||(E?p.target.baseVal:p.target))return;const[v,y]=b.href.split("#");if(y!==void 0&&v===location.href.split("#")[0]){H=!0,ye(I),W.page.set({...Z,url:b}),W.page.notify();return}pe({url:b,scroll:w.noscroll?ke():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:b.href===location.href},accepted:()=>l.preventDefault(),blocked:()=>l.preventDefault(),type:"link"})}),addEventListener("popstate",l=>{if(l.state){if(l.state[M]===I)return;const p=l.state[M]-I;pe({url:new URL(location.href),scroll:te[l.state[M]],keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{I=l.state[M]},blocked:()=>{history.go(-p)},type:"popstate",delta:p})}}),addEventListener("hashchange",()=>{H&&(H=!1,history.replaceState({...history.state,[M]:++I},"",location.href))});for(const l of document.querySelectorAll("link"))l.rel==="icon"&&(l.href=l.href);addEventListener("pageshow",l=>{l.persisted&&W.navigating.set(null)})},_hydrate:async({status:i,error:c,node_ids:h,params:l,routeId:p,data:b,errors:w})=>{var v;const E=new URL(location.href);let k;try{const y=h.map(async($,U)=>{const R=b[U];return fe({loader:ce[$],url:E,params:l,routeId:p,parent:async()=>{const P={};for(let _=0;_<U;_+=1)Object.assign(P,(await y[_]).data);return P},server_data_node:ue(R)})});k=await re({url:E,params:l,branch:await Promise.all(y),status:i,error:c!=null&&c.__is_http_error?new ie(c.status,c.message):c,validation_errors:w,route:(v=se.find($=>$.id===p))!=null?v:null})}catch(y){const $=y;if($ instanceof Be){await ee(new URL(y.location,location.href));return}k=await ae({status:$ instanceof ie?$.status:500,error:$,url:E,routeId:p})}Ue(k)}}}let Kt=1;async function Xe(r,e){const t=new URL(r);t.pathname=r.pathname.replace(/\/$/,"")+Bt,t.searchParams.set("__invalid",e.map(a=>a?"y":"n").join("")),t.searchParams.set("__id",String(Kt++)),await X(()=>import(t.href),[],import.meta.url);const s=window.__sveltekit_data;return delete window.__sveltekit_data,s}const Ft=["hash","href","host","hostname","origin","pathname","port","protocol","search","searchParams","toString","toJSON"];function oe(r,e){for(const t of Ft)Object.defineProperty(e,t,{get(){throw new Error(`The navigation shape changed - ${r}.${t} should now be ${r}.url.${t}`)}});return e}async function Wt({env:r,hydrate:e,paths:t,target:s,trailing_slash:a}){gt(t);const u=Jt({target:s,base:t.base,trailing_slash:a});zt({client:u}),e?await u._hydrate(e):u.goto(location.href,{replaceState:!0}),u._start_router()}export{Wt as start};
